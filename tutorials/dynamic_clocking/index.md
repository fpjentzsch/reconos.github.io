---
title: Dynamic Clocking
layout: page
---

# Dynamic Clocking

ReconOS supports multiple clocks with different frequencies that can be assigned to your hardware slots and the internal ReconOS system itself. In addition, clocks can be defined as *dynamic* within the build.cfg file. This allows you to change their frequency during runtime with a simple function call:
```
int reconos_clock_<<name>>_set(int f); //Set frequency of clock <<name>> to f KHz
```
A demonstration of this feature can be found in the sort-demo, where the clock for the sorting hardware threads is adjusted on the fly and the resulting difference in computation runtime can be observed.
In order to use dynamic clocks, it is important to understand the inner workings and limitations of the current ReconOS version:

* Each clock is generated by its own PLL. This means the maximum number of clocks is limited by the clocking resources of your device.
   
* Each clock is generated from a reference frequency of 100MHz by multiplying with `(Multiplier/Divider)`. It is important to note that this multiplier is fixed by the ReconOS System Builder at export time. It is selected as the minimum multiplier between 8 and 15 that can generate the output frequency closest to the desired **initial frequency** using a corresponding divider. The divider is then adjusted during runtime to change the frequency. This means you need to carefully select the initial frequency in order to set certain desired frequencies later on. The clock_set function mentioned above sets and returns the frequency closest to your desired frequency in case it cannot be perfectly divided.
   
   Example:

   | Initial frequency &nbsp;&nbsp; | Multiplier &nbsp;&nbsp; | Initial divider &nbsp;&nbsp; | Reachable dynamic frequencies                          |
   | ------------------------------ | ----------------------- | ---------------------------- | ------------------------------------------------------ |
   | 100MHz                         | 8                       | 8                            | ..., 80MHz, 89MHz, 100MHz, 114MHz, 133MHz, 160MHz, ... |
   | 120MHz                         | 12                      | 10                           | ..., 100MHz, 109MHz, 120MHz, 133MHz, 150MHz, ...       |

* Always remember to re-export & -build the software part of your project if you change these initial frequencies, because it requires the multipliers to set your frequencies correctly.

* The ReconOS system clock should not be dynamic, as reconfiguring this clock can hang up the system.
